name: Docker Image CI

on:
  [workflow_dispatch]
  
jobs:
  publish_images:
    runs-on: ubuntu-latest
    steps:
    -name: checkout
    - uses: actions/checkout@v4
    - name: Build the Docker image
      run: docker build ./api/ -t JoeDafoe/docker-smtp-relay:latest
    -name: push image to dockerhub
      run:
          docker login -u ${{ secret.DOCKERHUB_USERNAME }} -p ${{ secret.DOCKERHUB }}
          docker push JoeDafoe/docker-smtp-relay:latest
